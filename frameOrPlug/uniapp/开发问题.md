#### 修改组件内部样式

`/deep/`

```css
/deep/.uni-navbar-btn-icon-left span {
  font-weight: bold;
  font-size: 36rpx;
}
```

#### 自定义导航，导致导航太往上

```scss
padding-top: var(--status-bar-height); // 把状态栏的位置从前景部分挤出来
```

#### 点击输入框页面被软键盘遮挡问题

```json
"pages": [ // pages数组中第一项表示应用启动页，参考：https://uniapp.dcloud.io/collocation/pages
	{
		"path" : "pages/release/release",
		"style": {
			"app-plus": {
				"softinputMode": "adjustResize" // 设置这个即可
			}
		}
	},
]

```

```js
uni.onWindowResize((res) => {
  console.log("变化后的窗口宽度=" + res.size.windowWidth);
  console.log("变化后的窗口高度=" + res.size.windowHeight);
  uni.pageScrollTo({
    scrollTop: 10000,
    duration: 300,
  });
});
```

#### get 请求变成 post 请求

微信开发者工具版本： 1.05.2102010

因为多了一个斜杠导致请求方式改变

正常的 url
`https://api.biggoldcow.com/api/login`

错误的 url
`https://api.biggoldcow.com//api/login`
这种错误形式在微信小程序上会改变请求类型为 get,
在浏览器上不会

错误的 url
`https://api.biggoldcow.com//api/loginabs`
这种错误形式并不会改变请求类型

---

#### 打包目录介绍

启动页及 icon：HBuilder-Hello\app\src\main\res\drawable-xxhdpi

---

#### 返回页面需要点击两次才能返回

```js
function plusReady() {
  // Android处理返回键
  plus.key.addEventListener(
    "backbutton",
    function () {
      plus.webview.close(plus.webview.getTopWebview());
    },
    false
  );
}

if (window.plus) {
  plusReady();
} else {
  document.addEventListener("plusready", plusReady, false);
}
```

#### 返回死循环

多级返回
部分业务场景下，返回的逻辑中需要返回多级页面。
由于 uni.navigateBack() 同样会触发 onBackPress 函数。因此在 onBackPress 中直接调用 uni.navigateBack() 并始终返回 true 会引发死循环。
此时，需要根据 onBackPress 的回调对象中的 from 值来做处理，当来源是 ‘navigateBack’ 时，返回 false。

```js

onBackPress(options) {
	if (options.from === 'navigateBack') {
		return false;
	}
	this.back();
	return true;
},
methods: {
	back() {
		uni.navigateBack({
			delta: 2
		});
	}
},

```

参考地址： https://ask.dcloud.net.cn/article/35120

---

##### 页面跳转传参问题

```js

uni.redirectTo({
	url: "/pages/tixian/web-panel?url=" + encodeURIComponent(res.data.pay_url)
})

// 函数会自动将参数序列化，所有需要对特殊参数进行编码
onLoad(options) {
	const url = decodeURIComponent(options.url)
}

```

参考： https://uniapp.dcloud.io/api/router?id=navigateto

#### 解决页面不铺满的问题

1.  App.vue

```css
uni-page-body,
html,
body {
  height: 100%;
}
```

2.  子页面的根元素设置 高度为 100% 即可

---

#### 输入框数字类型，仍可以输入字母

首先为何输入框 input[type=number]能输入 e 呢？ 究竟这个 e 是何方神圣，查阅资料得知，原来 e = 2.71828…

解决：
在 inpu 原生事件中把非数字的按键过滤掉，具体操作如下:

```js
 <input v-model="goPage"
   onKeypress="return (/[\d]/.test(String.fromCharCode(event.keyCode)))"
   :max="9999999" type="number" placeholder="请输入"></input>
```

版权声明：本文为 CSDN 博主「王一诺 Eno」的原创文章，遵循 CC 4.0 BY-SA 版权协议，转载请附上原文出处链接及本声明。
原文链接：https://blog.csdn.net/weixin_40755688/article/details/95794638

---

#### webview 数据通信

1. webview.html

```js
<script
  type="text/javascript"
  src="https://otest-oss.s3-ap-south-1.amazonaws.com/uni.webview.1.5.1.js"
></script>;

uni.postMessage({
  data: {
    action: "postMessage",
  },
});
```

2. webview.vue

```html
<web-view :src="url" @message="onMessage"></web-view>
```

```js

mounted () {
	// #ifdef H5
	window.addEventListener('message', function (event) {
	  if (event.data.data.arg.action === 'postMessage') {
		uni.switchTab({
		  url: '/pages/me/me',
		});
	  }
	});
	// #endif
},
methods: {
	// app 会执行
	onMessage(e) {
		console.log(e, 'e')
	}
}
```

---

#### 消息推送

> 注意必须使用官方原生的离线包打包

```js


onShow() {
	// #ifdef APP-PLUS  
	this.android_receive();
	
	setTimeout(() => {
		// 消息的小红点  有手机兼容性
		plus.runtime.setBadgeNumber(8);
	}, 5000)
	// #endif
},

android_notify(content = '', data = {}) {
	// #ifdef APP-PLUS
	var title = 'TEST'

	console.log('准备通知')
	console.log(plus.os.name)

	//Android平台下才使用此推送
	if (plus.os.name != 'Android') {
		return false
	}

	//随机生成通知ID
	var NotifyID = Math.floor(Math.random() * 10000) + 1

	var main = plus.android.runtimeMainActivity() || { name: 'test' }
	var Context = plus.android.importClass('android.content.Context')
	var NotificationManager = plus.android.importClass('android.app.NotificationManager')
	var nm = main.getSystemService(Context.NOTIFICATION_SERVICE)

	var Notification = plus.android.importClass('android.app.Notification')
	Notification.icon = 'https://ss0.bdstatic.com/70cFuHSh_Q1YnxGkpoWK1HF6hhy/it/u=2718219500,1861579782&fm=26&gp=0.jpg'
	var Intent = plus.android.importClass('android.content.Intent')
	var PendingIntent = plus.android.importClass('android.app.PendingIntent')
	var intent = new Intent(main, main.getClass())

	//传递参数
	var payload = {
		msg: content,
		notify_id: NotifyID,
		data: data,
	}
	intent.putExtra('receive', JSON.stringify(payload))

	//PendingIntent.getActivity的第二个参数需要设置为随机数，否则多个通知时会导致前面的通知被后面的通知替换Extra的数据
	var pendingIntent = PendingIntent.getActivity(main, 0, intent, PendingIntent.FLAG_CANCEL_CURRENT)
	var SystemVersion = plus.os.version
	var firstVersionNumber = Number(SystemVersion.split('.')[0])
	var r = plus.android.importClass('android.R')
	var mNotification

	//判断当前系统版本在8.0及以上
	if (firstVersionNumber >= 8) {
		var NotificationChannel = plus.android.importClass('android.app.NotificationChannel')
		var channel = new NotificationChannel('s' + NotifyID, '1', NotificationManager.IMPORTANCE_HIGH)
		nm.createNotificationChannel(channel)
		Notification = plus.android.importClass('android.support.v4.app.NotificationCompat')
		mNotification = new Notification.Builder(main, 's' + NotifyID)
	} else {
		Notification = plus.android.importClass('android.app.Notification')
		mNotification = new Notification.Builder(main)
	}

	mNotification.setContentTitle(title) //设置标题
	mNotification.setContentText(content) //设置内容
	//mNotification.setSubText('');        //子内容暂时去掉
	mNotification.setAutoCancel(true) //设置点击消失
	mNotification.setShowWhen(true) //显示通知时间，貌似不加这句也能显示
	mNotification.setTicker('PadInfo') //弹出通知
	mNotification.setSmallIcon(17301610) //设置当前app图标
	//mNotification.setDefaults(Notification.DEFAULT_VIBRATE);  //声音、闪灯、震动效果，可叠加，此语句无效
	mNotification.setPriority(Notification.PRIORITY_DEFAULT) //通知优先级
	mNotification.flags = Notification.FLAG_ONLY_ALERT_ONCE //发起通知时震动
	mNotification.setContentIntent(pendingIntent)
	var mNb = mNotification.build()

	//判断当前系统版本在8.0及以上
	if (firstVersionNumber >= 8) {
		nm.notify('s' + NotifyID, NotifyID, mNb)
	} else {
		nm.notify(NotifyID, mNb)
	}
	//void plus.device.beep(2);//bee bee叫
	plus.device.vibrate(300) //震动

	console.log('通知结束')

	return true
	// #endif
},
/**
 * android原生通知接收
 */
android_receive() {
	// #ifdef APP-PLUS
	if (plus.os.name != 'Android') {
		return false
	}
	//android原生通知栏接收器（程序退出后无效）
	var main = plus.android.runtimeMainActivity()
	var intent = main.getIntent()
	var message = intent && intent.getExtra != undefined ? intent.getExtra('receive') : null
	console.log(message)
	message = message ? JSON.parse(message) : ''
	if (message) {
		//删除当前通知
		// var Context = plus.android.importClass("android.content.Context");
		// var nm = main.getSystemService(Context.NOTIFICATION_SERVICE);
		// console.log(message.notify_id);
		//nm.cancel('s' + message.notify_id, message.notify_id);//安卓版本大于等于8的
		//nm.cancel(message.notify_id);//安卓版本小于8的
		// nm.cancelAll();

		//把消息数据置空，以免再次打开APP时重复执行此处
		intent.putExtra('receive', '')

		var params = message.data
		console.log(params, 'params')
	}
	// #endif
},

```
