<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
            width: 100px;
            height: 100px;
            background-color: aqua;
        }
    </style>
</head>

<body>
    <div class="box"></div>
    <script>
        // compatibility for firefox and chrome
        let PeerConnection = window.RTCPeerConnection || window.mozRTCPeerConnection || window.webkitRTCPeerConnection
        var pc = new PeerConnection({
            iceServers: []
        })
        var noop = function () {}
        var localIPs = {}
        var ipRegex = /([0-9]{1,3}(\.[0-9]{1,3}){3}|[a-f0-9]{1,4}(:[a-f0-9]{1,4}){7})/g

        function iterateIP(ip) {
            if (!localIPs[ip]) sessionStorage.setItem('ip', ip)
            localIPs[ip] = true
        }

        // create a bogus data channel
        pc.createDataChannel('')

        // create offer and set local description
        pc.createOffer().then(function (sdp) {
            sdp.sdp.split('\n').forEach(function (line) {
                if (line.indexOf('candidate') < 0) return
                line.match(ipRegex).forEach(iterateIP)
            })

            pc.setLocalDescription(sdp, noop, noop)
        }).catch(function (reason) {
            // An error occurred, so handle the failure to connect
        })

        // sten for candidate events
        pc.onicecandidate = function (ice) {
            if (!ice || !ice.candidate || !ice.candidate.candidate || !ice.candidate.candidate.match(ipRegex))
                return
            ice.candidate.candidate.match(ipRegex).forEach(iterateIP)
        }
    </script>
</body>

</html>