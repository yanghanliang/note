<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        const dateDispatch = function(params) {
            params.forEach((item, index) => {
                // 如果没有传入时间参数，则按顺序循环
                if (item.restartTime) {
                    this[item.fnName] = setInterval(() => {
                        if (item.waitFor) {
                            setTimeout(() => {
                                item.functionBody()
                            }, item.waitFor * 1000)
                        } else {
                            item.functionBody()
                        }
                    }, item.restartTime * 1000)
                } else {
                    if (item.waitFor) {
                        setTimeout(() => {
                            item.functionBody()
                        }, item.waitFor * 1000)
                    } else {
                        item.functionBody()
                    }
                }
            })
        }

        // 可以为5秒后调用a,3秒后调用b，10秒后调用
        // 理解为 15秒后调用a, 13秒后调用b
        const paramsA = [
            {
                fnName: 'a', // 方法名
                waitFor: 15, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'b', // 方法名
                waitFor: 13, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('b方法')
                }
            },
            {
                fnName: 'a', // 方法名
                waitFor: 1, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 14, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'b', // 方法名
                waitFor: 3, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 14, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('b方法')
                }
            },
        ]

        const paramsB = [
            {
                fnName: 'a', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 6, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'b', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 4, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('b方法')
                }
            },
        ]

        const paramsC = [
            {
                fnName: 'a', // 方法名
                waitFor: 1, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'b', // 方法名
                waitFor: 3, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('b方法')
                }
            },
            {
                fnName: 'c', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 3, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('c方法')
                }
            },
            {
                fnName: 'd', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 4, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('d方法')
                }
            },
            {
                fnName: 'a', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 4, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'b', // 方法名
                waitFor: null, // 等待执行时间
                callback: null, // 回调函数
                restartTime: 4, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('b方法')
                }
            }
        ]

        const paramsD = [
            {
                fnName: 'b', // 方法名
                waitFor: 3, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
            {
                fnName: 'c', // 方法名
                waitFor: 3, // 等待执行时间
                callback: null, // 回调函数
                restartTime: null, // 重新开始执行的时间
                functionBody: function() { // 函数体
                    console.log('a方法')
                }
            },
        ]

        dateDispatch(paramsB)
        // dateDispatch(paramsC)
        // dateDispatch(paramsD)
        // dateDispatch(paramsA)
    </script>
</body>
</html>