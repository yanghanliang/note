<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        .box {
            width: 100px;
            height: 100px;
            background-color: aqua;
        }
    </style>
</head>

<body>
    <div class="box"></div>
    <script>
        // var insidePlant = '111'
        // var foo = 'aaa'
        // var fun = {
        //     insidePlant: '222',
        //     ret: function(param) {
        //         var foo = param
        //         this.foo = 'bbb'
        //         console.log('ret this:' + this.insidePlant)
        //         console.log('ret:' + insidePlant)
        //         console.log('ret foo1:' + this.foo)
        //         console.log('foo:' + foo)
        //     }
        // }

        // console.log(fun.insidePlant)
        // console.log(foo)
        // var newret = fun.ret
        // newret('ooo')
        // console.log('newret.foo:' + newret.foo)
        // fun.ret()

        // function my() {
        //     var insidePlant = 'xxx'
        //     console.log('var1:' + insidePlant)
        //     console.log('this.insidePlant1:' + this.insidePlant)
        //     var insidePlant = '333'
        //     console.log('var2:' + insidePlant)
        //     this.insidePlant = 'hhh'
        //     console.log('this.insidenPlan2:' + insidePlant)
        // }

        // var t = new my()
        // console.log('t:' + t.insidePlant)
        // console.log('insdePlant:' + insidePlant)
        let data = [
            {
                id: 1,
                name: 'a',
                pid: 0
            },
            {
                id: 2,
                name: 'b',
                pid: 0
            },
            {
                id: 3,
                name: 'c',
                pid: 1
            },
            {
                id: 4,
                name: 'd',
                pid: 3
            },
            {
                id: 5,
                name: 'e',
                pid: 2
            }
        ]

        
        let InfinitePoleClassification = function(data) {
            let arr = []
            let ipc = function(obj) {
                for(let i = 0, length = data.length; i < length; i++) {
                    let item = data[i]
                    if (item.pid === obj.id) {
                        ipc(item)
                        if (obj.children) {
                            obj.children.push(item)
                        } else {
                            obj.children = [item]
                        }
                    }
                }
                return obj
            }

            for(let i = 0, length = data.length; i < length; i++) {
                let item = data[i]
                if (item.pid === 0) {
                    arr.push(ipc(item))
                }
            }

            return arr
        }

        InfinitePoleClassification(data)
    </script>
</body>

</html>